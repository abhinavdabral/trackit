/*! trackit 2016-09-05 */
!function(a){function b(){function a(a,b){window.addEventListener?b.addEventListener(a,k,!1):window.attachEvent&&b.attachEvent("on"+a,k)}function b(b,c){c?c.getAttribute(d)||(a("scroll",c),a("resize",c),c.setAttribute(d,containerEvents.push(c)-1)):p||(a("scroll",document),a("resize",window),p=!0)}function i(a,d){var e=-1;if(d.container&&1!=d.container.nodeType)throw Error("Container is not a valid DOM element.");if(1!=a.nodeType)throw Error("Element is not a valid DOM element.");if(b(a,d.container),!a.getAttribute(c)){var f={element:a};o.length&&(e=o.shift()),e==-1?(e=n.push(f),e--):n[e]=f,d.container&&(f.container=container),f.trackingId=e,a.setAttribute(c,e)}return d.inActions&&(n[e].inActions=d.inActions),d.outActions&&(n[e].outActions=d.outActions),d.log&&(n[e].log=d.log),e}function j(a){if(a.getAttribute(c)){var b=a.getAttribute(c);n[b]=null,o.push(b),a.removeAttribute(c)}}function k(a){performance.now();if(n.length){var b=window.innerHeight,c=window.innerWidth;n.reduce(function(d,i){if(!a||i.resize!==!1){i.current&&(i.last=JSON.parse(JSON.stringify(i.current)));var j=i.element.getBoundingClientRect(),k=b,n=c;if(i.container){var o=container.getBoundingClientRect();k=o.height,n=o.width}var p=k-(j.top+j.height),q=n-(j.left+j.width),r=p+j.height,s=q+j.width;if(i.current={topTop:j.top,rightRight:q,botBot:p,leftLeft:j.left,topBot:r,rightLeft:j.right,botTop:j.bottom,leftRight:s,middleX:q-j.left,middleY:p-j.top,width:j.width,height:j.height,deltaX:0,deltaY:0,viewportX:i.last?i.last.viewportX:d,viewportY:i.last?i.last.viewportY:d},i.last&&(i.current.deltaX=i.current.leftLeft-i.last.leftLeft,i.current.deltaY=i.current.topTop-i.last.topTop),h.reduce(function(a,b){var c,d=[],g=function(a){return i.current[a]};if("Y"===b){if(i.last&&!i.current.deltaY)return;d=f.map(g)}else{if(i.last&&!i.current.deltaX)return;d=e.map(g)}!i.current["delta"+b]&&i.last||([d[0]]<=0||[d[1]]<=0?c=0:[d[2]]>=0&&[d[3]]>=0?c=1:(c=-1,[d[2]]<0?[d[0]]>.7*k&&(c=1):[d[3]]<0&&[d[1]]>.7*k&&(c=1))),i.current["viewport"+b]=c},null),i.last&&(0!==i.current.viewportX||0!==i.current.viewportY)){var t=i.inActions,u=i.outActions;h.reduce(function(a,b){if(0!==i.current["viewport"+("X"===b?"Y":"X")]){var c=i.current["viewport"+b],d=i.last["viewport"+b],e=i.current["delta"+b];e&&c!=d&&(0==c&&u?e<0?(1==d&&m(u[g[b][0]],!1),m(u[g[b][0]],!0)):(1==d&&m(u[g[b][1]],!1),m(u[g[b][1]],!0)):1==c&&t?e<0?(0==d&&m(t[g[b][1]],!1),m(t[g[b][1]],!0)):(0==d&&m(t[g[b][0]],!1),m(t[g[b][0]],!0)):0==d&&t?e<0?m(t[g[b][1]],!1):m(t[g[b][0]],!1):u&&(e<0?m(u[g[b][0]],!1):m(u[g[b][1]],!1)))}},null)}i.log&&l(i.trackingId,i.log)}},null)}}function l(a,b){b(JSON.stringify(n[a].current).split(",").join("<br>"))}function m(a,b){"function"==typeof a?a():"object"==typeof a&&(b?"function"==typeof a.onComplete&&a.onComplete():"function"==typeof a.onStart&&a.onStart())}var n=[],o=[],p=!1;return{track:i,untrack:j,log:l}}var c="data-trackit-id",d="data-trackit-container",e=["rightLeft","leftRight","leftLeft","rightRight"],f=["botTop","topBot","topTop","botBot"],g={X:["left","right"],Y:["top","bottom"]},h=["X","Y"];a.Trackit=b()}(window);